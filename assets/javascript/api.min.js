function initMap(){map=new google.maps.Map(document.getElementById("map"),{zoom:4,scrollwheel:!0,mapTypeIds:["roadmap","satellite","hybrid","terrain"],center:new google.maps.LatLng(39.8282,-98.5795)}),geocoder=new google.maps.Geocoder,infowindow=new google.maps.InfoWindow,getWeather()}function getWeather(){$.simpleWeather({location:wLocation,unit:"f",success:function(e){html='<img id="weatherImage" src='+e.image+">",html+="<p>Today's Weather</p>",html+='<div class="tempwrapper"><h3 id="currenttemp">'+e.temp+"&deg;F</h3>",html+='<div class="smalltempwrapper"><p id="hightemp">H: '+e.high+'&deg;F</p><p id="lowtemp">L: '+e.low+"&deg;F</p></div></div>",html+='<ul><li id="weatherFullWidth">'+e.city+", "+e.region+"</li>",html+='<li id="weatherLeftHalf">'+e.currently+"</li>",html+='<li id="weatherRightHalf">Humidity: '+e.humidity+"%</li></ul>",html+='<div id="weatherForecast">';for(var t=0;5>t;t++)html+="<img src="+e.forecast[t].thumbnail+"><p>"+e.forecast[t].day+": "+e.forecast[t].high+"&deg;F</p>";html+='</div><div id="weatherLink"><a href="'+e.link+'"target="_blank">Full Forecast Here</a></div>',html+='<div><p class="weatherLatestUpdate valign-wrapper white-text">Last updated: '+e.updated+"</p></div>",$(".weather").html(html)},error:function(e){$(".weather").html("<p>"+e+"</p>")}})}var map,geocoder,infowindow,coordinates=[],eventInfo=[],contentString,marker,wLocation="Austin, TX";$(".modal-content").on("keyup",function(e){13==e.keyCode&&$("#searchBtn").click()}),$(document).on("click","#searchBtn, .collection-item",function(e){coordinates=[],eventInfo=[],$("#modal2 .row").empty();var t,n,a;if($(e.target).is("#searchBtn")?(t=$("#textInput").val().trim(),n=$("#locationInput").val().trim(),a=$("#resultsNumInput").val().trim()):$(this).hasClass("collection-item")&&(t=$(this).children(".title").text(),n="Austin, TX",a=30,$("#modal1").closeModal()),""==t||""==n)console.log("Required search fields are not met.");else{$("#textInput, #locationInput").val(null),wLocation=n,getWeather();var i="https://api.meetup.com/find/groups?&sign=true&photo-host=public&filter=all&upcoming_events=true&fallback_suggestions=true&country=US&location="+n+"&radius=smart&text="+t+"&page="+a+"&key=2b1e504a1c3ea586da4a465e6c5223";$.ajax({url:i,method:"GET",dataType:"jsonp"}).done(function(e){function t(e,t,n,i){var o=coordinates[a],r=o.split(",",2),s={lat:parseFloat(r[0])+.01*Math.random(),lng:parseFloat(r[1])+.01*Math.random()};e.setCenter(s),e.setZoom(12),t=new google.maps.Marker({map:e,position:s,animation:google.maps.Animation.DROP}),n=new google.maps.InfoWindow({content:i}),t.addListener("click",function(){n.open(e,t),null!==t.getAnimation()?t.setAnimation(null):t.setAnimation(google.maps.Animation.BOUNCE),$(".gm-style-iw").siblings().children(":nth-child(2)").css({display:"none"}),$(".gm-style-iw").siblings().children(":nth-child(4)").css({display:"none"}),$(".gm-style-iw").siblings().children("img").parent().addClass("infoWindowClose"),$(".gm-style-iw").parent().addClass("infoWindowSize")}),n.addListener("closeclick",function(){t.setAnimation(null)})}var n=e.data;initMap();for(var a=0;a<n.length;a++)coordinates.push(n[a].lat+", "+n[a].lon),void 0===n[a].photos?eventInfo.eventPhoto="assets/images/noImageFound.jpg":eventInfo.eventPhoto=n[a].photos[0].photo_link,eventInfo.push({eventName:n[a].name,eventDescription:n[a].description,eventLink:n[a].link,eventFounded:n[a].created,nextEventName:n[a].next_event.name,nextEvent:n[a].next_event.time,nextEventRSVP:n[a].next_event.yes_rsvp_count}),contentString='<div class="iw-container"><div class="iw-title center">'+eventInfo[a].eventName+'</div><br><div class="main-text-width"><div class="text-justify text-padding">'+eventInfo[a].eventDescription+'<br><div class="center"><a href='+eventInfo[a].eventLink+' target="_blank">Meetup Link</a></div></div></div></div>',eventAdder='<div class="col s12 m4 l3 center modal-card-margin"><div class="card image-hover"><div class="card-image waves-effect waves-block waves-black"><img class="activator eventImg" src='+eventInfo.eventPhoto+'></div><br><div class="card-content"><span class="card-title activator grey-text text-darken-4 eventTitle">'+eventInfo[a].eventName+'</span><br><br><p><a href="'+eventInfo[a].eventLink+'" target="_blank">Meetup Link</a></p></div><div class="card-reveal"><span class="card-title grey-text text-darken-4">'+eventInfo[a].eventName+'<i class="material-icons right eventClose">close</i></span><br> <p><strong>Founded:</strong><br>'+moment(eventInfo[a].eventFounded).format("MM/DD/YYYY")+"</p> <br> <p><strong>Next Event:</strong><br>"+eventInfo[a].nextEventName+"</p> <br> <p><strong>Next Event Date:</strong><br>"+moment(eventInfo[a].nextEvent).format("MM/DD/YYYY hh:mm A")+"</p><br> <p><strong>RSVP:</strong> "+eventInfo[a].nextEventRSVP+"</p></div></div></div>",t(map,marker,infowindow,contentString),$("#modal2 .row").append(eventAdder)})}});